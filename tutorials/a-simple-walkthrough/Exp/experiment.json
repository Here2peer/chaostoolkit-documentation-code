{
	"version": "0.0.1",
	"title": "What is the impact of killing a pod?",
	"description": "If the pod is killed, we should spin up a new pod.",
	"tags": ["kubernetes"],

	"secrets": {
		"k8s": {
			"kubernetes": {
				"KUBERNETES_HOST": "https://192.168.1.3:80api/v1/",
				"KUBERNETES_CERT_FILE": {
					"type": "env",
					"key": "kubecert"
				},
				"KUBERNETES_KEY_FILE": {
					"type": "env",
					"key": "kubekey"
				}
			}
		}
	},
	"steady-state-hypothesis": {
        "title": "Verifying service remains healthy",
        "probes": [
            {
                "name": "all-our-microservices-should-be-healthy",
                "type": "probe",
                "tolerance": true,
                "secrets": ["k8s"],
                "provider": {
                    "type": "python",
                    "module": "chaosk8s.probes",
                    "func": "microservice_available_and_healthy",
                    "arguments": {
                        "name": "postgres"
                    }
                }
            }
        ]
    },
	"method": [{
		"type": "action",
		"name": "we-can-request-list-of-books",
		"tolerance": 200,
		"provider": {
			"type": "http",
			"timeout": 3,
			"verify_tls": false,
			"url": "http://192.168.1.3:30571/all"
		}
	}]
}